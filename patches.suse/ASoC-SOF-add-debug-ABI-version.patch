From 2014185eba4e061db038a59a6e1d85e88291edc6 Mon Sep 17 00:00:00 2001
From: Pan Xiuli <xiuli.pan@linux.intel.com>
Date: Wed, 15 Apr 2020 15:28:02 -0500
Subject: [PATCH] ASoC: SOF: add debug ABI version
Git-commit: 2014185eba4e061db038a59a6e1d85e88291edc6
Patch-mainline: v5.8-rc1
References: jsc#SLE-16518

Add new debug ABI version to be increased when changing user space debug
interfaces while the the main FW ABI is not affected.

The abi_dbg_version share same definition with SOF_ABI_VER

This change main ABI to 3.14.0

Signed-off-by: Pan Xiuli <xiuli.pan@linux.intel.com>
Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Reviewed-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Link: https://lore.kernel.org/r/20200415202816.934-11-pierre-louis.bossart@linux.intel.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 include/sound/sof/info.h | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/include/sound/sof/info.h b/include/sound/sof/info.h
index 68e92b550439..162f38430958 100644
--- a/include/sound/sof/info.h
+++ b/include/sound/sof/info.h
@@ -32,6 +32,7 @@ enum sof_ipc_ext_data {
 	SOF_IPC_EXT_WINDOW		= 1,
 	SOF_IPC_EXT_CC_INFO		= 2,
 	SOF_IPC_EXT_PROBE_INFO		= 3,
+	SOF_IPC_EXT_USER_ABI_INFO	= 4,
 };
 
 /* FW version - SOF_IPC_GLB_VERSION */
@@ -126,4 +127,11 @@ struct sof_ipc_probe_support {
 	uint32_t reserved[2];
 } __packed;
 
+/* extended data: user abi version(s) */
+struct sof_ipc_user_abi_version {
+	struct sof_ipc_ext_data_hdr ext_hdr;
+
+	uint32_t abi_dbg_version;
+}  __packed;
+
 #endif
-- 
2.16.4

