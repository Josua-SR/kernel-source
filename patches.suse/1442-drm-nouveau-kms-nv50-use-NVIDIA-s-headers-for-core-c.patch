From c6696a6dba18320a86d540f611b7c67c08fff565 Mon Sep 17 00:00:00 2001
From: Ben Skeggs <bskeggs@redhat.com>
Date: Sat, 20 Jun 2020 17:55:22 +1000
Subject: drm/nouveau/kms/nv50-: use NVIDIA's headers for core caps_init()
Git-commit: d8b24526ef68059b91b4c2ea6c4ff8a0e39eb926
Patch-mainline: v5.9-rc1
References: jsc#SLE-12680, jsc#SLE-12880, jsc#SLE-12882, jsc#SLE-12883, jsc#SLE-13496, jsc#SLE-15322

Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
Reviewed-by: Lyude Paul <lyude@redhat.com>
Signed-off-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/gpu/drm/nouveau/dispnv50/core507d.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/nouveau/dispnv50/core507d.c b/drivers/gpu/drm/nouveau/dispnv50/core507d.c
index f28b91cae2db..626f83904434 100644
--- a/drivers/gpu/drm/nouveau/dispnv50/core507d.c
+++ b/drivers/gpu/drm/nouveau/dispnv50/core507d.c
@@ -76,7 +76,7 @@ core507d_caps_init(struct nouveau_drm *drm, struct nv50_disp *disp)
 	if ((ret = PUSH_WAIT(push, 2)))
 		return ret;
 
-	PUSH_NVSQ(push, NV507D, 0x008c, 0x00000000);
+	PUSH_MTHD(push, NV507D, GET_CAPABILITIES, 0x00000000);
 	return PUSH_KICK(push);
 }
 
-- 
2.29.2

