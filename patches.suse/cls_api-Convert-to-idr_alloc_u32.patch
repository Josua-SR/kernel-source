From: Matthew Wilcox <mawilcox@microsoft.com>
Date: Tue, 6 Feb 2018 16:37:52 -0500
Subject: cls_api: Convert to idr_alloc_u32
Patch-mainline: v4.16-rc1
Git-commit: 9ce75499ac140af71f0003322c99b6e58f39dfbe
References: bsc#1109837

Use the new helper.

Signed-off-by: Matthew Wilcox <mawilcox@microsoft.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/sched/cls_api.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/net/sched/cls_api.c
+++ b/net/sched/cls_api.c
@@ -382,8 +382,8 @@ static int tcf_block_insert(struct tcf_b
 	struct tcf_net *tn = net_generic(net, tcf_net_id);
 	int err;
 
-	err = idr_alloc_ext(&tn->idr, block, NULL, block_index,
-			    block_index + 1, GFP_KERNEL);
+	err = idr_alloc_u32(&tn->idr, block, &block_index, block_index,
+			    GFP_KERNEL);
 	if (err)
 		return err;
 	block->index = block_index;
