From: Bart Van Assche <bart.vanassche@wdc.com>
Date: Wed, 18 Jul 2018 09:25:29 -0700
Subject: net/smc: Remove a WARN_ON() statement
Git-commit: 12c36dcfd6f48ece2fce4dc8e6ce68224d005d37
Patch-mainline: v4.19-rc1
References: FATE#325694, LTC#167874, bsc#1113508

Remove a WARN_ON() statement that verifies something that is guaranteed
by the RDMA API, namely that the failed_wr pointer is not touched if an
ib_post_send() call succeeds and that it points at the failed wr if an
ib_post_send() call fails.

Signed-off-by: Bart Van Assche <bart.vanassche@wdc.com>
Acked-by: Ursula Braun <ubraun@linux.ibm.com>
Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 net/smc/smc_wr.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/net/smc/smc_wr.c b/net/smc/smc_wr.c
index dbd2605d1962..8b9bdd9bc615 100644
--- a/net/smc/smc_wr.c
+++ b/net/smc/smc_wr.c
@@ -274,7 +274,6 @@ int smc_wr_reg_send(struct smc_link *link, struct ib_mr *mr)
 	link->wr_reg.key = mr->rkey;
 	failed_wr = &link->wr_reg.wr;
 	rc = ib_post_send(link->roce_qp, &link->wr_reg.wr, &failed_wr);
-	WARN_ON(failed_wr != &link->wr_reg.wr);
 	if (rc)
 		return rc;
 

