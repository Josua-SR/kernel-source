From: Erik Schmauss <erik.schmauss@intel.com>
Date: Thu, 3 Aug 2017 14:27:42 +0800
Subject: ACPICA: Revert "Update resource descriptor handling"
Patch-mainline: v4.14-rc1
Git-commit: d5efc154e797f72064ce5bac82213df09f1586b1
References: bsc#1117419

ACPICA commit f3300640c63df138d133740b54e2c0a1befa4086

This reverts commit c8eac10178b387f9eb1935694e509d4518da77bb.

Link: https://github.com/acpica/acpica/commit/f3300640
Signed-off-by: Erik Schmauss <erik.schmauss@intel.com>
Signed-off-by: Lv Zheng <lv.zheng@intel.com>
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Acked-by: Lee, Chun-Yi <jlee@suse.com>
---
 drivers/acpi/acpica/utresrc.c |   14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

--- a/drivers/acpi/acpica/utresrc.c
+++ b/drivers/acpi/acpica/utresrc.c
@@ -184,11 +184,9 @@ acpi_ut_walk_aml_resources(struct acpi_w
 
 	ACPI_FUNCTION_TRACE(ut_walk_aml_resources);
 
-	/*
-	 * The absolute minimum resource template is one end_tag descriptor.
-	 * However, we will treat a lone end_tag as just a simple buffer.
-	 */
-	if (aml_length <= sizeof(struct aml_resource_end_tag)) {
+	/* The absolute minimum resource template is one end_tag descriptor */
+
+	if (aml_length < sizeof(struct aml_resource_end_tag)) {
 		return_ACPI_STATUS(AE_AML_NO_RESOURCE_END_TAG);
 	}
 
@@ -252,10 +250,8 @@ acpi_ut_walk_aml_resources(struct acpi_w
 				*context = aml;
 			}
 
-			/*
-			 * Normal exit. Note: We allow the buffer to be larger than
-			 * the resource template, as long as the END_TAG exists.
-			 */
+			/* Normal exit */
+
 			return_ACPI_STATUS(AE_OK);
 		}
 
