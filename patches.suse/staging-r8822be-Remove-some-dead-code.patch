From c353af8343c37386161167ae7fbe6747f6be580c Mon Sep 17 00:00:00 2001
From: Larry Finger <Larry.Finger@lwfinger.net>
Date: Wed, 30 Aug 2017 14:43:12 -0500
Subject: [PATCH] staging: r8822be: Remove some dead code
Git-commit: c353af8343c37386161167ae7fbe6747f6be580c
Patch-mainline: v4.14-rc1
References: FATE#326887

The code found inside an #ifdef CONFIG_RTL_DEBUG ... #endif section
is left over from debugging of the original driver, and should be
deleted.

Reported by: Andreas Ziegler <andreas.ziegler@fau.de>

Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
Cc: Ping-Ke Shih <pkshih@realtek.com>
Cc: Yan-Hsuan Chuang <yhchuang@realtek.com>
Cc: Birming Chiu <birming@realtek.com>
Cc: Shaofu <shaofu@realtek.com>
Cc: Steven Ting <steventing@realtek.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/staging/rtlwifi/halmac/rtl_halmac.c | 20 --------------------
 1 file changed, 20 deletions(-)

diff --git a/drivers/staging/rtlwifi/halmac/rtl_halmac.c b/drivers/staging/rtlwifi/halmac/rtl_halmac.c
index 031bf2c6078f..2b1c5fae64ef 100644
--- a/drivers/staging/rtlwifi/halmac/rtl_halmac.c
+++ b/drivers/staging/rtlwifi/halmac/rtl_halmac.c
@@ -386,26 +386,6 @@ static void deinit_priv(struct rtl_halmac *halmac)
 		u32 count, size;
 
 		count = HALMAC_FEATURE_ALL + 1;
-#ifdef CONFIG_RTL_DEBUG
-		{
-			struct submit_ctx *sctx;
-			u32 i;
-
-			for (i = 0; i < count; i++) {
-				if (!indicator[i].sctx)
-					continue;
-
-				RT_TRACE(
-					rtlpriv, COMP_HALMAC, DBG_LOUD,
-					"%s: <WARN> %s id(%d) sctx still exist!!\n",
-					__func__, RTL_HALMAC_FEATURE_NAME[i],
-					i);
-				sctx = indicator[i].sctx;
-				indicator[i].sctx = NULL;
-				rtl_mfree((u8 *)sctx, sizeof(*sctx));
-			}
-		}
-#endif /* !CONFIG_RTL_DEBUG */
 		size = sizeof(*indicator) * count;
 		kfree((u8 *)indicator);
 	}
-- 
2.19.1

