From cbe5843e7624b6a468d74faccffec57b5c73200b Mon Sep 17 00:00:00 2001
From: Thomas Gardner <tmg@fastmail.com>
Date: Fri, 7 Jul 2017 10:24:32 +1000
Subject: [PATCH] staging: typec: Fix endianness warning discovered by sparse
Git-commit: cbe5843e7624b6a468d74faccffec57b5c73200b
Patch-mainline: v4.14
References: FATE#326325

The below warning is resolved by removing the cpu_to_le32() call. This
call was redundant; vdm_run_state_machine() ensures that SVDM responses
have the correct endianness before sending.

typec/tcpm.c:1019:49: warning: incorrect type in assignment (different base types)
typec/tcpm.c:1019:49:    expected unsigned int [unsigned] [usertype] <noident>
typec/tcpm.c:1019:49:    got restricted __le32 [usertype] <noident>

Signed-off-by: Thomas Gardner <tmg@fastmail.com>
Reviewed-by: Guenter Roeck <linux@roeck-us.net>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/staging/typec/tcpm.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/staging/typec/tcpm.c b/drivers/staging/typec/tcpm.c
index 20eb4ebcf8c3..2195c80235a1 100644
--- a/drivers/staging/typec/tcpm.c
+++ b/drivers/staging/typec/tcpm.c
@@ -1015,8 +1015,7 @@ static int tcpm_pd_svdm(struct tcpm_port *port, const __le32 *payload, int cnt,
 			if (port->data_role == TYPEC_DEVICE &&
 			    port->nr_snk_vdo) {
 				for (i = 0; i <  port->nr_snk_vdo; i++)
-					response[i + 1]
-						= cpu_to_le32(port->snk_vdo[i]);
+					response[i + 1] = port->snk_vdo[i];
 				rlen = port->nr_snk_vdo + 1;
 			}
 			break;
-- 
2.16.4

