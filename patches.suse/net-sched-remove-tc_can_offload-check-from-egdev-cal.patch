From: Jiri Pirko <jiri@mellanox.com>
Date: Wed, 1 Nov 2017 11:47:40 +0100
Subject: net: sched: remove tc_can_offload check from egdev call
Patch-mainline: v4.15-rc1
Git-commit: 7612fb0387d6ffcfc3173527466fe3f596657c58
References: bsc#1109837

Since the only user, mlx5 driver does the check in
mlx5e_setup_tc_block_cb, no need to check here.

Signed-off-by: Jiri Pirko <jiri@mellanox.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/sched/cls_api.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/net/sched/cls_api.c
+++ b/net/sched/cls_api.c
@@ -1227,7 +1227,7 @@ static int tc_exts_setup_cb_egdev_call(s
 		if (!a->ops->get_dev)
 			continue;
 		dev = a->ops->get_dev(a);
-		if (!dev || !tc_can_offload(dev))
+		if (!dev)
 			continue;
 		ret = tc_setup_cb_egdev_call(dev, type, type_data, err_stop);
 		if (ret < 0)
