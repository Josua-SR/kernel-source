From: Vlad Buslov <vladbu@mellanox.com>
Date: Fri, 10 May 2019 20:19:29 +0300
Subject: net/mlx5e: Init ethtool steering for representors
Patch-mainline: v5.7-rc1
Git-commit: 6783e8b29f636383af293a55336f036bc7ad5619
References: jsc#SLE-15172

During transition to uplink representors the code responsible for
initializing ethtool steering functionality wasn't added to representor
init rx routine. This causes NULL pointer dereference during configuration
of network flow classification rule with ethtool (only possible to
reproduce with next commit in this series which registers necessary ethtool
callbacks).

Signed-off-by: Vlad Buslov <vladbu@mellanox.com>
Reviewed-by: Roi Dayan <roid@mellanox.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/net/ethernet/mellanox/mlx5/core/en_rep.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
@@ -1685,6 +1685,8 @@ static int mlx5e_init_rep_rx(struct mlx5
 	if (err)
 		goto err_destroy_root_ft;
 
+	mlx5e_ethtool_init_steering(priv);
+
 	return 0;
 
 err_destroy_root_ft:
