From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Wed, 21 Feb 2018 15:15:53 +0000
Subject: drm/i915/execlists: Add a GEM_TRACE to show when the context is
 completed
Git-commit: 65cb8c0f040bd791b9adb761be2710adcd9df00f
Patch-mainline: v4.17-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

Include a GEM_TRACE to show when the context is complete and we advance
the ELSP port.

Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Reviewed-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20180221151553.9054-1-chris@chris-wilson.co.uk

Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/i915/intel_lrc.c |    3 +++
 1 file changed, 3 insertions(+)

--- a/drivers/gpu/drm/i915/intel_lrc.c
+++ b/drivers/gpu/drm/i915/intel_lrc.c
@@ -886,6 +886,9 @@ static void execlists_submission_tasklet
 				trace_i915_request_out(rq);
 				i915_request_put(rq);
 
+				GEM_TRACE("%s completed ctx=%d\n",
+					  engine->name, port->context_id);
+
 				execlists_port_complete(execlists, port);
 			} else {
 				port_set(port, port_pack(rq, count));
