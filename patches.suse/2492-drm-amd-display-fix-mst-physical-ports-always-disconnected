From: Krzysztof Nowicki <krzysztof.a.nowicki@gmail.com>
Date: Fri, 27 Jan 2017 18:58:27 +0100
Subject: drm/amd/display: Fix MST physical ports always disconnected
Git-commit: a2b763cbd69e59854ed3ff9f79b7e8471748ea69
Patch-mainline: v4.15-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

Remove a false assumption that a cached EDID will be present whenever
the connector is in a connected state as this will only be true for
logical MST ports. For physical ports the EDID will never be cached,
which will cause them to always appear as disconnected.

This reverts commit 4ff8a88888de271bfb7750b2a5c68163848e2bf1
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c |    8 --------
 1 file changed, 8 deletions(-)

--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
@@ -127,14 +127,6 @@ dm_dp_mst_detect(struct drm_connector *c
 			&master->mst_mgr,
 			aconnector->port);
 
-	/*
-	 * we do not want to make this connector connected until we have edid on
-	 * it
-	 */
-	if (status == connector_status_connected &&
-		!aconnector->port->cached_edid)
-		status = connector_status_disconnected;
-
 	return status;
 }
 
