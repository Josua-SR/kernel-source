From: Harry Wentland <harry.wentland@amd.com>
Date: Wed, 3 May 2017 14:21:37 -0400
Subject: drm/amd/display: ifdef some code only needed for DCN
Git-commit: f3e4341871bee5c91ffbf9d90c4f5af380759e33
Patch-mainline: v4.15-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Reviewed-by: Tony Cheng <Tony.Cheng@amd.com>
Acked-by: Harry Wentland <Harry.Wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/amd/display/dc/inc/core_types.h |    4 ++++
 drivers/gpu/drm/amd/display/dc/inc/hw/ipp.h     |    2 ++
 drivers/gpu/drm/amd/display/dc/inc/hw/opp.h     |    2 ++
 3 files changed, 8 insertions(+)

--- a/drivers/gpu/drm/amd/display/dc/inc/core_types.h
+++ b/drivers/gpu/drm/amd/display/dc/inc/core_types.h
@@ -31,8 +31,10 @@
 #include "dcn_calcs.h"
 #include "ddc_service_types.h"
 #include "dc_bios_types.h"
+#if defined(CONFIG_DRM_AMD_DC_DCN1_0)
 #include "mem_input.h"
 #include "mpc.h"
+#endif
 
 struct core_stream;
 
@@ -256,7 +258,9 @@ struct resource_pool {
 
 	struct abm *abm;
 	struct dmcu *dmcu;
+#if defined(CONFIG_DRM_AMD_DC_DCN1_0)
 	struct mpc *mpc;
+#endif
 
 	const struct resource_funcs *funcs;
 	const struct resource_caps *res_cap;
--- a/drivers/gpu/drm/amd/display/dc/inc/hw/ipp.h
+++ b/drivers/gpu/drm/amd/display/dc/inc/hw/ipp.h
@@ -122,7 +122,9 @@ struct ipp_funcs {
 		struct input_pixel_processor *ipp,
 		const struct pwl_params *params);
 
+#if defined(CONFIG_DRM_AMD_DC_DCN1_0)
 	void (*ipp_destroy)(struct input_pixel_processor **ipp);
+#endif
 };
 
 #endif /* __DAL_IPP_H__ */
--- a/drivers/gpu/drm/amd/display/dc/inc/hw/opp.h
+++ b/drivers/gpu/drm/amd/display/dc/inc/hw/opp.h
@@ -27,7 +27,9 @@
 #define __DAL_OPP_H__
 
 #include "hw_shared.h"
+#if defined(CONFIG_DRM_AMD_DC_DCN1_0)
 #include "dc_hw_types.h"
+#endif
 #include "transform.h"
 
 struct fixed31_32;
