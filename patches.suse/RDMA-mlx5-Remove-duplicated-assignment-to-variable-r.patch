From: Colin Ian King <colin.king@canonical.com>
Date: Thu, 7 May 2020 16:16:10 +0100
Subject: RDMA/mlx5: Remove duplicated assignment to variable rcqe_sz
Patch-mainline: v5.8-rc1
Git-commit: 52c81f47f0d2680f0b2e7b61c1fa4d8ad35f3020
References: jsc#SLE-15175

The variable rcqe_sz is being unnecessarily assigned twice, fix this by
removing one of the duplicates.

Fixes: 8bde2c509e40 ("RDMA/mlx5: Update all DRIVER QP places to use QP subtype")
Link: https://lore.kernel.org/r/20200507151610.52636-1-colin.king@canonical.com
Addresses-Coverity: ("Evaluation order violation")
Signed-off-by: Colin Ian King <colin.king@canonical.com>
Acked-by: Leon Romanovsky <leonro@mellanox.com>
Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/mlx5/qp.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/drivers/infiniband/hw/mlx5/qp.c
+++ b/drivers/infiniband/hw/mlx5/qp.c
@@ -1994,8 +1994,7 @@ static int create_user_qp(struct mlx5_ib
 	if ((qp->flags_en & MLX5_QP_FLAG_SCATTER_CQE) &&
 	    (init_attr->qp_type == IB_QPT_RC ||
 	     init_attr->qp_type == IB_QPT_UC)) {
-		int rcqe_sz = rcqe_sz =
-			mlx5_ib_get_cqe_size(init_attr->recv_cq);
+		int rcqe_sz = mlx5_ib_get_cqe_size(init_attr->recv_cq);
 
 		MLX5_SET(qpc, qpc, cs_res,
 			 rcqe_sz == 128 ? MLX5_RES_SCAT_DATA64_CQE :
