From: "Gustavo A. R. Silva" <garsilva@embeddedor.com>
Date: Fri, 3 Nov 2017 11:58:23 -0500
Subject: crypto: chcr - Replace _manual_ swap with swap macro
Patch-mainline: v4.15-rc1
Git-commit: abfa2b377f752a13e6caaa8c6c4add6ab9b71ba8
References: bsc#1104270 FATE#325931

Make use of the swap macro and remove unnecessary variable temp.
This makes the code easier to read and maintain.

This code was detected with the help of Coccinelle.

Signed-off-by: Gustavo A. R. Silva <garsilva@embeddedor.com>
Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/crypto/chelsio/chcr_algo.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

--- a/drivers/crypto/chelsio/chcr_algo.c
+++ b/drivers/crypto/chelsio/chcr_algo.c
@@ -1634,11 +1634,8 @@ static int chcr_ahash_update(struct ahas
 	}
 
 	if (remainder) {
-		u8 *temp;
 		/* Swap buffers */
-		temp = req_ctx->reqbfr;
-		req_ctx->reqbfr = req_ctx->skbfr;
-		req_ctx->skbfr = temp;
+		swap(req_ctx->reqbfr, req_ctx->skbfr);
 		sg_pcopy_to_buffer(req->src, sg_nents(req->src),
 				   req_ctx->reqbfr, remainder, req->nbytes -
 				   remainder);
