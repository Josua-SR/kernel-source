From: zhong jiang <zhongjiang@huawei.com>
Date: Wed, 4 Sep 2019 10:39:11 +0800
Subject: sunrpc: Use kzfree rather than its implementation.
Patch-mainline: v5.4-rc1
Git-commit: 60b3990c2cef8667a659e44accffc8da0144ea98
References: bsc#1154353

Use kzfree instead of memset() + kfree().

Signed-off-by: zhong jiang <zhongjiang@huawei.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/sunrpc/auth_gss/gss_krb5_keys.c |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

--- a/net/sunrpc/auth_gss/gss_krb5_keys.c
+++ b/net/sunrpc/auth_gss/gss_krb5_keys.c
@@ -228,14 +228,11 @@ u32 krb5_derive_key(const struct gss_krb
 	ret = 0;
 
 err_free_raw:
-	memset(rawkey, 0, keybytes);
-	kfree(rawkey);
+	kzfree(rawkey);
 err_free_out:
-	memset(outblockdata, 0, blocksize);
-	kfree(outblockdata);
+	kzfree(outblockdata);
 err_free_in:
-	memset(inblockdata, 0, blocksize);
-	kfree(inblockdata);
+	kzfree(inblockdata);
 err_free_cipher:
 	crypto_free_sync_skcipher(cipher);
 err_return:
