From: Aditya Pakki <pakki001@umn.edu>
Date: Thu, 19 Dec 2019 11:57:35 -0600
Subject: bpf: Remove unnecessary assertion on fp_old
Patch-mainline: v5.6-rc1
Git-commit: 5bf2fc1f9c88397b125d5ec5f65b1ed9300ba59d
References: bsc#1177028

The two callers of bpf_prog_realloc - bpf_patch_insn_single and
bpf_migrate_filter dereference the struct fp_old, before passing
it to the function. Thus assertion to check fp_old is unnecessary
and can be removed.

Signed-off-by: Aditya Pakki <pakki001@umn.edu>
Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
Link: https://lore.kernel.org/bpf/20191219175735.19231-1-pakki001@umn.edu
Acked-by: Gary Lin <glin@suse.com>
---
 kernel/bpf/core.c |    2 --
 1 file changed, 2 deletions(-)

--- a/kernel/bpf/core.c
+++ b/kernel/bpf/core.c
@@ -222,8 +222,6 @@ struct bpf_prog *bpf_prog_realloc(struct
 	u32 pages, delta;
 	int ret;
 
-	BUG_ON(fp_old == NULL);
-
 	size = round_up(size, PAGE_SIZE);
 	pages = size / PAGE_SIZE;
 	if (pages <= fp_old->pages)
