From: Harry Wentland <harry.wentland@amd.com>
Date: Thu, 1 Dec 2016 10:00:09 -0500
Subject: drm/amd/display: Remove obsolete LATEST_ATOM_BIOS_SUPPORT
Git-commit: f60ea68d43798d9c366a8a38d4602fb7f12786e7
Patch-mainline: v4.15-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Reviewed-by: Tony Cheng <Tony.Cheng@amd.com>
Acked-by: Harry Wentland <Harry.Wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/amd/display/dc/bios/Makefile        |    1 -
 drivers/gpu/drm/amd/display/dc/bios/command_table.c |   16 ----------------
 2 files changed, 17 deletions(-)

--- a/drivers/gpu/drm/amd/display/dc/bios/Makefile
+++ b/drivers/gpu/drm/amd/display/dc/bios/Makefile
@@ -20,5 +20,4 @@ AMD_DISPLAY_FILES += $(AMDDALPATH)/dc/bi
 ###############################################################################
 AMD_DISPLAY_FILES += $(AMDDALPATH)/dc/bios/dce110/command_table_helper_dce110.o
 
-ccflags-y += -DLATEST_ATOM_BIOS_SUPPORT
 AMD_DISPLAY_FILES += $(AMDDALPATH)/dc/bios/dce112/command_table_helper_dce112.o
--- a/drivers/gpu/drm/amd/display/dc/bios/command_table.c
+++ b/drivers/gpu/drm/amd/display/dc/bios/command_table.c
@@ -115,11 +115,9 @@ static enum bp_result encoder_control_di
 	struct bios_parser *bp,
 	struct bp_encoder_control *cntl);
 
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 static enum bp_result encoder_control_digx_v5(
 	struct bios_parser *bp,
 	struct bp_encoder_control *cntl);
-#endif
 
 static void init_encoder_control_dig_v1(struct bios_parser *bp);
 
@@ -136,11 +134,9 @@ static void init_dig_encoder_control(str
 		bp->cmd_tbl.dig_encoder_control = encoder_control_digx_v4;
 		break;
 
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 	case 5:
 		bp->cmd_tbl.dig_encoder_control = encoder_control_digx_v5;
 		break;
-#endif
 
 	default:
 		init_encoder_control_dig_v1(bp);
@@ -290,7 +286,6 @@ static enum bp_result encoder_control_di
 	return result;
 }
 
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 static enum bp_result encoder_control_digx_v5(
 	struct bios_parser *bp,
 	struct bp_encoder_control *cntl)
@@ -348,7 +343,6 @@ static enum bp_result encoder_control_di
 
 	return result;
 }
-#endif
 
 /*******************************************************************************
  ********************************************************************************
@@ -829,7 +823,6 @@ static enum bp_result transmitter_contro
 	struct bp_transmitter_control *cntl)
 {
 	enum bp_result result = BP_RESULT_FAILURE;
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 	const struct command_table_helper *cmd = bp->cmd_helper;
 	DIG_TRANSMITTER_CONTROL_PARAMETERS_V1_6 params;
 
@@ -883,7 +876,6 @@ static enum bp_result transmitter_contro
 
 	if (EXEC_BIOS_CMD_TABLE(UNIPHYTransmitterControl, params))
 		result = BP_RESULT_OK;
-#endif
 	return result;
 }
 
@@ -1141,7 +1133,6 @@ static enum bp_result set_pixel_clock_v7
 	struct bp_pixel_clock_parameters *bp_params)
 {
 	enum bp_result result = BP_RESULT_FAILURE;
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 	PIXEL_CLOCK_PARAMETERS_V7 clk;
 	uint8_t controller_id;
 	uint32_t pll_id;
@@ -1203,7 +1194,6 @@ static enum bp_result set_pixel_clock_v7
 		if (EXEC_BIOS_CMD_TABLE(SetPixelClock, clk))
 			result = BP_RESULT_OK;
 	}
-#endif
 	return result;
 }
 
@@ -2539,15 +2529,12 @@ static enum bp_result enable_disp_power_
  **
  ********************************************************************************
  *******************************************************************************/
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 static enum bp_result set_dce_clock_v2_1(
 	struct bios_parser *bp,
 	struct bp_set_dce_clock_parameters *bp_params);
-#endif
 
 static void init_set_dce_clock(struct bios_parser *bp)
 {
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 	switch (BIOS_CMD_TABLE_PARA_REVISION(SetDCEClock)) {
 	case 1:
 		bp->cmd_tbl.set_dce_clock = set_dce_clock_v2_1;
@@ -2556,10 +2543,8 @@ static void init_set_dce_clock(struct bi
 		bp->cmd_tbl.set_dce_clock = NULL;
 		break;
 	}
-#endif
 }
 
-#ifdef LATEST_ATOM_BIOS_SUPPORT
 static enum bp_result set_dce_clock_v2_1(
 	struct bios_parser *bp,
 	struct bp_set_dce_clock_parameters *bp_params)
@@ -2606,4 +2591,3 @@ static enum bp_result set_dce_clock_v2_1
 
 	return result;
 }
-#endif
