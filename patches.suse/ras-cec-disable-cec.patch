From: Borislav Petkov <bp@suse.de>
Date: Thu, 31 Aug 2017 00:17:11 +0200
Subject: RAS/CEC: Disable CEC
Patch-mainline: never, most likely
References: bsc#1056592

I can't test this due to lack of time and machines and... so flip the
logic to have it disabled by default and enable it only explicitly with
a command line switch ras=cec_enable.

Signed-off-by: Borislav Petkov <bp@suse.de>
---
 drivers/ras/cec.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/ras/cec.c b/drivers/ras/cec.c
index d0e5d6ee882c..e3f1f1936e91 100644
--- a/drivers/ras/cec.c
+++ b/drivers/ras/cec.c
@@ -114,7 +114,9 @@ static struct ce_array {
 		};
 		__u32 flags;
 	};
-} ce_arr;
+} ce_arr = {
+	.disabled = 1,
+};
 
 static DEFINE_MUTEX(ce_mutex);
 static u64 dfs_pfn;
@@ -523,8 +525,8 @@ int __init parse_cec_param(char *str)
 	if (*str == '=')
 		str++;
 
-	if (!strncmp(str, "cec_disable", 7))
-		ce_arr.disabled = 1;
+	if (!strncmp(str, "cec_enable", 6))
+		ce_arr.disabled = 0;
 	else
 		return 0;
 

