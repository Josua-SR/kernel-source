From: Tony Cheng <tony.cheng@amd.com>
Date: Mon, 23 Jan 2017 17:51:17 -0500
Subject: drm/amd/display: enable color gamma programming
Git-commit: 954815153b4b1213237d389be15d5448f67154ff
Patch-mainline: v4.15-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

Signed-off-by: Tony Cheng <tony.cheng@amd.com>
Reviewed-by: Yongqiang Sun <yongqiang.sun@amd.com>
Acked-by: Harry Wentland <Harry.Wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/amd/display/dc/core/dc.c |    6 ------
 drivers/gpu/drm/amd/display/dc/dc.h      |    1 -
 2 files changed, 7 deletions(-)

--- a/drivers/gpu/drm/amd/display/dc/core/dc.c
+++ b/drivers/gpu/drm/amd/display/dc/core/dc.c
@@ -1498,9 +1498,6 @@ void dc_update_surfaces_for_stream(struc
 			}
 		}
 
-		if (dc->debug.disable_color_module)
-			continue;  /* skip below color updates */
-
 		if (updates[i].gamma &&
 			updates[i].gamma != surface->public.gamma_correction) {
 			if (surface->public.gamma_correction != NULL)
@@ -1579,9 +1576,6 @@ void dc_update_surfaces_for_stream(struc
 			if (cur_pipe_ctx->surface == pipe_ctx->surface)
 				is_new_pipe_surface = false;
 
-			if (dc->debug.disable_color_module)
-				continue;  /* skip below color updates */
-
 			if (is_new_pipe_surface ||
 					updates[i].in_transfer_func)
 				core_dc->hwss.set_input_transfer_func(
--- a/drivers/gpu/drm/amd/display/dc/dc.h
+++ b/drivers/gpu/drm/amd/display/dc/dc.h
@@ -147,7 +147,6 @@ struct dc_debug {
 	bool disable_dfs_bypass;
 	bool disable_clock_gate;
 	bool disable_dmcu;
-	bool disable_color_module;
 };
 
 struct dc {
