From: "David S. Miller" <davem@davemloft.net>
Date: Mon, 16 Jul 2018 17:02:04 -0700
Subject: net: Fix GRO_HASH_BUCKETS assertion.
Patch-mainline: v4.19-rc1
Git-commit: ccdb51717ba3bdc9585998e4ffd41d70c04dedea
References: bsc#1109837

FIELD_SIZEOF() is in bytes, but we want bits.

Fixes: d9f37d01e294 ("net: convert gro_count to bitmask")
Suggested-by: Eric Dumazet <eric.dumazet@gmail.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 net/core/dev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/net/core/dev.c
+++ b/net/core/dev.c
@@ -9216,7 +9216,7 @@ static struct hlist_head * __net_init ne
 static int __net_init netdev_init(struct net *net)
 {
 	BUILD_BUG_ON(GRO_HASH_BUCKETS >
-			FIELD_SIZEOF(struct napi_struct, gro_bitmask));
+		     8 * FIELD_SIZEOF(struct napi_struct, gro_bitmask));
 
 	if (net != &init_net)
 		INIT_LIST_HEAD(&net->dev_base_head);
