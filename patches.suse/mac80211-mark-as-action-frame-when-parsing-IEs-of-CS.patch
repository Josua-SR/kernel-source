From 3b23782f7d004f3d7fa655623ebca3137b442656 Mon Sep 17 00:00:00 2001
From: Simon Wunderlich <sw@simonwunderlich.de>
Date: Tue, 16 May 2017 11:23:16 +0200
Subject: [PATCH] mac80211: mark as action frame when parsing IEs of CSA action frames
Git-commit: 3b23782f7d004f3d7fa655623ebca3137b442656
Patch-mainline: v4.13-rc1
References: FATE#326294

Signed-off-by: Simon Wunderlich <sw@simonwunderlich.de>
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 net/mac80211/mesh.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/mac80211/mesh.c b/net/mac80211/mesh.c
index 7e0498bb9337..2f189c59ae80 100644
--- a/net/mac80211/mesh.c
+++ b/net/mac80211/mesh.c
@@ -1262,7 +1262,7 @@ static void mesh_rx_csa_frame(struct ieee80211_sub_if_data *sdata,
 	pos = mgmt->u.action.u.chan_switch.variable;
 	baselen = offsetof(struct ieee80211_mgmt,
 			   u.action.u.chan_switch.variable);
-	ieee802_11_parse_elems(pos, len - baselen, false, &elems);
+	ieee802_11_parse_elems(pos, len - baselen, true, &elems);
 
 	ifmsh->chsw_ttl = elems.mesh_chansw_params_ie->mesh_ttl;
 	if (!--ifmsh->chsw_ttl)
-- 
2.19.2

