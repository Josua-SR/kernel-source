From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Date: Mon, 27 Nov 2017 09:25:51 +0100
Subject: staging: fsl-mc-bus: fix build warning

Git-commit: fb17be96eed821f60670adf1748afb3d57fe63bb
Patch-mainline: v4.16-rc1
References: fate#326530,fate#326531,fate#326535,fate#326538,fate#326539

error could be unitialized when it is used as a return value in
fsl_mc_device_add().  So fix up the warning by properly setting it.

Cc: Laurentiu Tudor <laurentiu.tudor@nxp.com>
Reported-by: kbuild test robot <fengguang.wu@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Mian Yousaf Kaukab <yousaf.kaukab@suse.com>
---
 drivers/staging/fsl-mc/bus/fsl-mc-bus.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/staging/fsl-mc/bus/fsl-mc-bus.c b/drivers/staging/fsl-mc/bus/fsl-mc-bus.c
index f84bc14ce925..f15bab32fb2f 100644
--- a/drivers/staging/fsl-mc/bus/fsl-mc-bus.c
+++ b/drivers/staging/fsl-mc/bus/fsl-mc-bus.c
@@ -570,6 +570,7 @@ int fsl_mc_device_add(struct fsl_mc_obj_desc *obj_desc,
 	mc_dev->dev.release = fsl_mc_device_release;
 	mc_dev->dev.type = fsl_mc_get_device_type(obj_desc->type);
 	if (!mc_dev->dev.type) {
+		error = -ENODEV;
 		dev_err(parent_dev, "unknown device type %s\n", obj_desc->type);
 		goto error_cleanup_dev;
 	}
-- 
2.11.0

