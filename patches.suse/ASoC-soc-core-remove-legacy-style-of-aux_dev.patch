From a48b561d873d1d9fda55782d275eff94ec647863 Mon Sep 17 00:00:00 2001
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date: Thu, 8 Aug 2019 14:54:39 +0900
Subject: [PATCH] ASoC: soc-core: remove legacy style of aux_dev
Git-commit: a48b561d873d1d9fda55782d275eff94ec647863
Patch-mainline: v5.4-rc1
References: jsc#SLE-16518

Now all drivers are using snd_soc_dai_link_component for aux_dev.
Let's remove legacy style

Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Link: https://lore.kernel.org/r/87h86s6w8x.wl-kuninori.morimoto.gx@renesas.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 include/sound/soc.h  | 9 ---------
 sound/soc/soc-core.c | 6 ------
 2 files changed, 15 deletions(-)

diff --git a/include/sound/soc.h b/include/sound/soc.h
index fd6ecea48fc0..2fc56e5963f3 100644
--- a/include/sound/soc.h
+++ b/include/sound/soc.h
@@ -963,19 +963,10 @@ struct snd_soc_codec_conf {
 };
 
 struct snd_soc_aux_dev {
-	const char *name;		/* Codec name */
-
 	/*
 	 * specify multi-codec either by device name, or by
 	 * DT/OF node, but not both.
 	 */
-	const char *codec_name;
-	struct device_node *codec_of_node;
-
-	/*
-	 * name, codec_name, codec_of_node will be replaced
-	 * into dlc. don't use both in the same time
-	 */
 	struct snd_soc_dai_link_component dlc;
 
 	/* codec/machine specific init - e.g. add machine controls */
diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 56b99e340dda..4af382d52675 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -1538,12 +1538,6 @@ static int soc_bind_aux_dev(struct snd_soc_card *card, int num)
 	struct snd_soc_aux_dev *aux_dev = &card->aux_dev[num];
 	struct snd_soc_component *component;
 
-	/* remove me */
-	if (aux_dev->codec_name)
-		aux_dev->dlc.name = aux_dev->codec_name;
-	if (aux_dev->codec_of_node)
-		aux_dev->dlc.of_node = aux_dev->codec_of_node;
-
 	/* codecs, usually analog devices */
 	component = soc_find_component(&aux_dev->dlc);
 	if (!component)
-- 
2.16.4

