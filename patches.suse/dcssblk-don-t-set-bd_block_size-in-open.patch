From: Christoph Hellwig <hch@lst.de>
Date: Fri, 26 Jun 2020 10:01:53 +0200
Subject: [PATCH] dcssblk: don't set bd_block_size in ->open
Git-commit: 9011495c9466ca0aaee2741f98d50ac2ca8cee11
Patch-mainline: v5.9-rc1
References: bsc#1175995,jsc#SLE-15608

bd_block_size contains a value that matches the logic block size when
opening, so the statement is redundant.  Even if it wasn't the dumb
assignment would cause a a mismatch with bd_inode->i_blkbits.

Reviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>
Signed-off-by: Christoph Hellwig <hch@lst.de>
Signed-off-by: Jens Axboe <axboe@kernel.dk>
Acked-by: Hannes Reinecke <hare@suse.com>
---
 drivers/s390/block/dcssblk.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/s390/block/dcssblk.c b/drivers/s390/block/dcssblk.c
index 35666c3537de..299e77ec2c41 100644
--- a/drivers/s390/block/dcssblk.c
+++ b/drivers/s390/block/dcssblk.c
@@ -832,7 +832,6 @@ dcssblk_open(struct block_device *bdev, fmode_t mode)
 		goto out;
 	}
 	atomic_inc(&dev_info->use_count);
-	bdev->bd_block_size = 4096;
 	rc = 0;
 out:
 	return rc;
-- 
2.16.4

