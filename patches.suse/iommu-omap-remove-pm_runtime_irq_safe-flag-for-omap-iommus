From: Tero Kristo <t-kristo@ti.com>
Date: Wed, 7 Aug 2019 11:26:52 +0300
Subject: iommu/omap: remove pm_runtime_irq_safe flag for OMAP IOMMUs
Git-commit: 1432ebbd60033f48ae24302524f9dca592103804
Patch-mainline: v5.4-rc1
References: bsc#1175713

This is not needed for anything, and prevents proper PM transitions for
parent devices which is bad in case of ti-sysc; this effectively kills
PM completely. Thus, remove the flag.

Signed-off-by: Tero Kristo <t-kristo@ti.com>
Signed-off-by: Joerg Roedel <jroedel@suse.de>
---
 drivers/iommu/omap-iommu.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/iommu/omap-iommu.c b/drivers/iommu/omap-iommu.c
index 3c7ba517dbc3..99a9ff3e7f71 100644
--- a/drivers/iommu/omap-iommu.c
+++ b/drivers/iommu/omap-iommu.c
@@ -1254,7 +1254,6 @@ static int omap_iommu_probe(struct platform_device *pdev)
 			goto out_sysfs;
 	}
 
-	pm_runtime_irq_safe(obj->dev);
 	pm_runtime_enable(obj->dev);
 
 	omap_iommu_debugfs_add(obj);

