From: Bart Van Assche <bart.vanassche@wdc.com>
Date: Thu, 5 Jul 2018 09:38:38 -0700
Subject: RDMA/core: Remove ib_find_cached_gid() and
 ib_find_cached_gid_by_port()
Patch-mainline: v4.19-rc1
Git-commit: 28e39894ed4fecd19956ae672a312f65419bd703
References: bsc#1103992 FATE#326009

Remove these two functions since all their callers have been removed.
See also commit ea8c2d8f6014 ("RDMA/core: Remove unused ib cache
functions").

Signed-off-by: Bart Van Assche <bart.vanassche@wdc.com>
Reviewed-by: Parav Pandit <parav@mellanox.com>
Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/core/cache.c |   38 --------------------------------------
 1 file changed, 38 deletions(-)

--- a/drivers/infiniband/core/cache.c
+++ b/drivers/infiniband/core/cache.c
@@ -747,26 +747,6 @@ const struct ib_gid_attr *rdma_find_gid_
 	return res;
 }
 
-int ib_find_cached_gid_by_port(struct ib_device *ib_dev,
-			       const union ib_gid *gid,
-			       enum ib_gid_type gid_type,
-			       u8 port, struct net_device *ndev,
-			       u16 *index)
-{
-	const struct ib_gid_attr *res;
-
-	res = rdma_find_gid_by_port(ib_dev, gid, gid_type, port, ndev);
-	if (IS_ERR(res))
-		return PTR_ERR(res);
-
-	if (index)
-		*index = res->index;
-	rdma_put_gid_attr(res);
-	return 0;
-
-}
-EXPORT_SYMBOL(ib_find_cached_gid_by_port);
-
 static struct ib_gid_table *alloc_gid_table(int sz)
 {
 	struct ib_gid_table *table = kzalloc(sizeof(*table), GFP_KERNEL);
@@ -1038,24 +1018,6 @@ const struct ib_gid_attr *rdma_find_gid(
 }
 EXPORT_SYMBOL(rdma_find_gid);
 
-int ib_find_cached_gid(struct ib_device *device, const union ib_gid *gid,
-		       enum ib_gid_type gid_type, struct net_device *ndev,
-		       u8 *port_num, u16 *index)
-{
-	const struct ib_gid_attr *res;
-
-	res = rdma_find_gid(device, gid, gid_type, ndev);
-	if (IS_ERR(res))
-		return PTR_ERR(res);
-	if (port_num)
-		*port_num = res->port_num;
-	if (index)
-		*index = res->index;
-	rdma_put_gid_attr(res);
-	return 0;
-}
-EXPORT_SYMBOL(ib_find_cached_gid);
-
 int ib_get_cached_pkey(struct ib_device *device,
 		       u8                port_num,
 		       int               index,
