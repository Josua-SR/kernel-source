From 9310f0dc1c6430ca9e370a8341bea9f5dc85f40b Mon Sep 17 00:00:00 2001
From: Mika Westerberg <mika.westerberg@linux.intel.com>
Date: Wed, 23 May 2018 17:22:19 -0500
Subject: [PATCH] PCI: pciehp: Rename host->native_hotplug to
 host->native_pcie_hotplug
Git-commit: 9310f0dc1c6430ca9e370a8341bea9f5dc85f40b
Patch-mainline: v4.18
References: FATE#326302

Rename host->native_hotplug to host->native_pcie_hotplug to make room for a
similar flag for SHPC hotplug.

Suggested-by: Bjorn Helgaas <bhelgaas@google.com>
Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
[bhelgaas: split to separate patch]
Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/acpi/pci_root.c         |    2 +-
 drivers/pci/pcie/portdrv_core.c |    2 +-
 drivers/pci/probe.c             |    2 +-
 include/linux/pci.h             |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

--- a/drivers/acpi/pci_root.c
+++ b/drivers/acpi/pci_root.c
@@ -906,7 +906,7 @@ struct pci_bus *acpi_pci_root_create(str
 
 	host_bridge = to_pci_host_bridge(bus->bridge);
 	if (!(root->osc_control_set & OSC_PCI_EXPRESS_NATIVE_HP_CONTROL))
-		host_bridge->native_hotplug = 0;
+		host_bridge->native_pcie_hotplug = 0;
 	if (!(root->osc_control_set & OSC_PCI_EXPRESS_AER_CONTROL))
 		host_bridge->native_aer = 0;
 	if (!(root->osc_control_set & OSC_PCI_EXPRESS_PME_CONTROL))
--- a/drivers/pci/pcie/portdrv_core.c
+++ b/drivers/pci/pcie/portdrv_core.c
@@ -217,7 +217,7 @@ static int get_port_device_capability(st
 	int services = 0;
 
 	if (dev->is_hotplug_bridge &&
-	    (pcie_ports_native || host->native_hotplug)) {
+	    (pcie_ports_native || host->native_pcie_hotplug)) {
 		services |= PCIE_PORT_SERVICE_HP;
 
 		/*
--- a/drivers/pci/probe.c
+++ b/drivers/pci/probe.c
@@ -546,7 +546,7 @@ struct pci_host_bridge *pci_alloc_host_b
 	 * OS from interfering.
 	 */
 	bridge->native_aer = 1;
-	bridge->native_hotplug = 1;
+	bridge->native_pcie_hotplug = 1;
 	bridge->native_pme = 1;
 	bridge->native_ltr = 1;
 
--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -477,7 +477,7 @@ struct pci_host_bridge {
 	unsigned int ignore_reset_delay:1;	/* for entire hierarchy */
 	unsigned int no_ext_tags:1;		/* no Extended Tags */
 	unsigned int	native_aer:1;		/* OS may use PCIe AER */
-	unsigned int	native_hotplug:1;	/* OS may use PCIe hotplug */
+	unsigned int	native_pcie_hotplug:1;	/* OS may use PCIe hotplug */
 	unsigned int	native_pme:1;		/* OS may use PCIe PME */
 	unsigned int	native_ltr:1;		/* OS may use PCIe LTR */
 	/* Resource alignment requirements */
