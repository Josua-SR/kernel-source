From: Andrii Nakryiko <andriin@fb.com>
Date: Wed, 25 Sep 2019 11:30:38 -0700
Subject: libbpf: fix false uninitialized variable warning
Git-commit: aef70a1f44c0b570e6345c02c2d240471859f0a4
Patch-mainline: 5.4-rc1
References: bnc#1151927 5.3.6

Some compilers emit warning for potential uninitialized next_id usage.
The code is correct, but control flow is too complicated for some
compilers to figure this out. Re-initialize next_id to satisfy
compiler.

Signed-off-by: Andrii Nakryiko <andriin@fb.com>
Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 tools/lib/bpf/btf_dump.c |    1 +
 1 file changed, 1 insertion(+)

--- a/tools/lib/bpf/btf_dump.c
+++ b/tools/lib/bpf/btf_dump.c
@@ -1167,6 +1167,7 @@ static void btf_dump_emit_type_chain(str
 				return;
 			}
 
+			next_id = decls->ids[decls->cnt - 1];
 			next_t = btf__type_by_id(d->btf, next_id);
 			multidim = btf_is_array(next_t);
 			/* we need space if we have named non-pointer */
