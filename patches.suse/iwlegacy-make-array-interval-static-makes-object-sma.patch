From 55047fb783e0f5b13fc79653f09a06782c3ffe18 Mon Sep 17 00:00:00 2001
From: Colin Ian King <colin.king@canonical.com>
Date: Mon, 7 Oct 2019 14:41:13 +0100
Subject: [PATCH] iwlegacy: make array interval static, makes object smaller
Git-commit: 55047fb783e0f5b13fc79653f09a06782c3ffe18
Patch-mainline: v5.5-rc1
References: jsc#SLE-13430

Don't populate the array interval on the stack but instead make it
static. Makes the object code smaller by 121 bytes.

Before: text	   data	    bss	    dec	    hex	filename 167797	  29676	    448	 197921	  30521	wireless/intel/iwlegacy/common.o

After: text	   data	    bss	    dec	    hex	filename 167580	  29772	    448	 197800	  304a8	wireless/intel/iwlegacy/common.o

(gcc version 9.2.1, amd64)

Signed-off-by: Colin Ian King <colin.king@canonical.com>
Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/intel/iwlegacy/common.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/wireless/intel/iwlegacy/common.c b/drivers/net/wireless/intel/iwlegacy/common.c
index 73f7bbf742bc..e4ea734e58d8 100644
--- a/drivers/net/wireless/intel/iwlegacy/common.c
+++ b/drivers/net/wireless/intel/iwlegacy/common.c
@@ -1072,7 +1072,7 @@ EXPORT_SYMBOL(il_get_channel_info);
 static void
 il_build_powertable_cmd(struct il_priv *il, struct il_powertable_cmd *cmd)
 {
-	const __le32 interval[3][IL_POWER_VEC_SIZE] = {
+	static const __le32 interval[3][IL_POWER_VEC_SIZE] = {
 		SLP_VEC(2, 2, 4, 6, 0xFF),
 		SLP_VEC(2, 4, 7, 10, 10),
 		SLP_VEC(4, 7, 10, 10, 0xFF)
-- 
2.16.4

