From: Parav Pandit <parav@mellanox.com>
Date: Tue, 3 Apr 2018 23:06:18 -0500
Subject: IB/rxe: Removed GID add/del dummy routines
Patch-mainline: v4.17-rc1
Git-commit: 39e00b6cf65831469a57333a929b8ca986892798
References: bsc#1103992 FATE#326009

rxe driver's add_gid() and del_gid() callbacks are doing simple
checks which are already done by the ib core before invoking these
callback routines.
Therefore, code is simplified to skip implementing add_gid() and
del_gid() callback functions.
They are only invoked by ib_core if they are implemented.

Signed-off-by: Parav Pandit <parav@mellanox.com>
Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/sw/rxe/rxe_verbs.c |   17 -----------------
 1 file changed, 17 deletions(-)

--- a/drivers/infiniband/sw/rxe/rxe_verbs.c
+++ b/drivers/infiniband/sw/rxe/rxe_verbs.c
@@ -77,21 +77,6 @@ out:
 	return rc;
 }
 
-static int rxe_add_gid(const union ib_gid *gid,
-		       const struct ib_gid_attr *attr, void **context)
-{
-	if (attr->index >= RXE_PORT_GID_TBL_LEN)
-		return -EINVAL;
-	return 0;
-}
-
-static int rxe_del_gid(const struct ib_gid_attr *attr, void **context)
-{
-	if (attr->index >= RXE_PORT_GID_TBL_LEN)
-		return -EINVAL;
-	return 0;
-}
-
 static struct net_device *rxe_get_netdev(struct ib_device *device,
 					 u8 port_num)
 {
@@ -1265,8 +1250,6 @@ int rxe_register_device(struct rxe_dev *
 	dev->modify_port = rxe_modify_port;
 	dev->get_link_layer = rxe_get_link_layer;
 	dev->get_netdev = rxe_get_netdev;
-	dev->add_gid = rxe_add_gid;
-	dev->del_gid = rxe_del_gid;
 	dev->query_pkey = rxe_query_pkey;
 	dev->alloc_ucontext = rxe_alloc_ucontext;
 	dev->dealloc_ucontext = rxe_dealloc_ucontext;
