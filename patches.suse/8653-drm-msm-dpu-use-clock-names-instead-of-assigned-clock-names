From: Sean Paul <seanpaul@chromium.org>
Date: Wed, 25 Jul 2018 16:34:44 -0400
Subject: drm/msm: dpu: Use clock-names instead of assigned-clock-names
Git-commit: 41a8e8865a82b4fd4ff62b43b7c6d3bc5831f93d
Patch-mainline: v4.19-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

In these cases, we want to enumerate _all_ clocks, not just the ones
that are assigned a rate.

Signed-off-by: Sean Paul <seanpaul@chromium.org>
Signed-off-by: Rob Clark <robdclark@gmail.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/msm/disp/dpu1/dpu_io_util.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_io_util.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_io_util.c
@@ -147,8 +147,7 @@ int msm_dss_parse_clock(struct platform_
 		return -EINVAL;
 
 	mp->num_clk = 0;
-	num_clk = of_property_count_strings(pdev->dev.of_node,
-					    "assigned-clock-names");
+	num_clk = of_property_count_strings(pdev->dev.of_node, "clock-names");
 	if (num_clk <= 0) {
 		pr_debug("clocks are not defined\n");
 		return 0;
@@ -162,7 +161,7 @@ int msm_dss_parse_clock(struct platform_
 
 	for (i = 0; i < num_clk; i++) {
 		rc = of_property_read_string_index(pdev->dev.of_node,
-						   "assigned-clock-names", i,
+						   "clock-names", i,
 						   &clock_name);
 		if (rc) {
 			dev_err(&pdev->dev, "Failed to get clock name for %d\n",
