From 3a22b4650ead54a28315e3c0e5116ca5e130e977 Mon Sep 17 00:00:00 2001
From: Michal Suchanek <msuchanek@suse.de>
Date: Mon, 31 Aug 2020 16:35:28 +0200
Subject: [PATCH] char: virtio: Select VIRTIO from VIRTIO_CONSOLE.
References: bsc#1175667
Patch-mainline: v5.10-rc1
Git-commit: 9f30eb29c514589e16f2999ea070598583d1f6ec

Make it possible to make virtio console built-in when
other virtio drivers are modular.

Signed-off-by: Michal Suchanek <msuchanek@suse.de>
---
 drivers/char/Kconfig | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/char/Kconfig b/drivers/char/Kconfig
index 466ebd84ad17..78f91f4c34cd 100644
--- a/drivers/char/Kconfig
+++ b/drivers/char/Kconfig
@@ -139,8 +139,9 @@ source "drivers/tty/hvc/Kconfig"
 
 config VIRTIO_CONSOLE
 	tristate "Virtio console"
-	depends on VIRTIO && TTY
+	depends on TTY
 	select HVC_DRIVER
+	select VIRTIO
 	help
 	  Virtio console for use with hypervisors.
 
-- 
2.28.0

