From 6baca010c71176f406299ea1949e721ab995ff01 Mon Sep 17 00:00:00 2001
From: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Date: Fri, 9 Jun 2017 21:46:50 +0900
Subject: [PATCH] ALSA: pcm: use friendly name for id of PCM substream in trace print
Git-commit: 6baca010c71176f406299ea1949e721ab995ff01
Patch-mainline: v4.13-rc1
References: bsc#1121278

Use the same print format of snd_pcm_debug_name() for userspace tracing
program.

Suggested-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/core/pcm_param_trace.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/sound/core/pcm_param_trace.h b/sound/core/pcm_param_trace.h
index 872922326b38..86c8d658a25c 100644
--- a/sound/core/pcm_param_trace.h
+++ b/sound/core/pcm_param_trace.h
@@ -49,11 +49,11 @@ TRACE_EVENT(hw_mask_param,
 		memcpy(__entry->prev_bits, prev->bits, sizeof(__u32) * 8);
 		memcpy(__entry->curr_bits, curr->bits, sizeof(__u32) * 8);
 	),
-	TP_printk("%d,%d,%d,%d %03d/%03d %s %08x%08x%08x%08x %08x%08x%08x%08x",
+	TP_printk("pcmC%dD%d%s:%d %03d/%03d %s %08x%08x%08x%08x %08x%08x%08x%08x",
 		  __entry->card,
 		  __entry->device,
+		  __entry->direction ? "c" : "p",
 		  __entry->subdevice,
-		  __entry->direction,
 		  __entry->index,
 		  __entry->total,
 		  __print_symbolic(__entry->type, hw_param_labels),
@@ -109,11 +109,11 @@ TRACE_EVENT(hw_interval_param,
 		__entry->curr_integer = curr->integer;
 		__entry->curr_empty = curr->empty;
 	),
-	TP_printk("%d,%d,%d,%d %03d/%03d %s %d %d %s%u %u%s %d %d %s%u %u%s",
+	TP_printk("pcmC%dD%d%s:%d %03d/%03d %s %d %d %s%u %u%s %d %d %s%u %u%s",
 		  __entry->card,
 		  __entry->device,
+		  __entry->direction ? "c" : "p",
 		  __entry->subdevice,
-		  __entry->direction,
 		  __entry->index,
 		  __entry->total,
 		  __print_symbolic(__entry->type, hw_param_labels),
-- 
2.20.1

