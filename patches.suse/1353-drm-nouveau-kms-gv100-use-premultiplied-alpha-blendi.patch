From 2c7442ea17f32a9d6eb8c6672478e7a6fafd4631 Mon Sep 17 00:00:00 2001
From: Ben Skeggs <bskeggs@redhat.com>
Date: Tue, 11 Jun 2019 14:54:32 +1000
Subject: drm/nouveau/kms/gv100-: use premultiplied alpha blending between
 planes
Git-commit: 2c7442ea17f32a9d6eb8c6672478e7a6fafd4631
Patch-mainline: v5.4-rc1
References: bsc#1152489

This is apparently the assumed default behaviour when blend properties
are absent.

Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
Acked-by: Thomas Zimmermann <tzimmermann@suse.de>
---
 drivers/gpu/drm/nouveau/dispnv50/wndwc37e.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/nouveau/dispnv50/wndwc37e.c b/drivers/gpu/drm/nouveau/dispnv50/wndwc37e.c
index 826d1d760d3a..8a4f0e436be6 100644
--- a/drivers/gpu/drm/nouveau/dispnv50/wndwc37e.c
+++ b/drivers/gpu/drm/nouveau/dispnv50/wndwc37e.c
@@ -107,10 +107,10 @@ wndwc37e_image_set(struct nv50_wndw *wndw, struct nv50_wndw_atom *asyw)
 		       asyw->state.crtc_w);
 
 	/*XXX: Composition-related stuff.  Need to implement properly. */
-	evo_mthd(push, 0x02ec, 1);
+	evo_mthd(push, 0x02ec, 7);
 	evo_data(push, (2 - (wndw->id & 1)) << 4);
-	evo_mthd(push, 0x02f4, 5);
-	evo_data(push, 0x00000011);
+	evo_data(push, 0x000000ff);
+	evo_data(push, 0x00007722);
 	evo_data(push, 0xffff0000);
 	evo_data(push, 0xffff0000);
 	evo_data(push, 0xffff0000);
-- 
2.28.0

