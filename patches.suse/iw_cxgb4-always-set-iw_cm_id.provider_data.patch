From: Steve Wise <swise@opengridcomputing.com>
Date: Thu, 10 May 2018 07:31:28 -0700
Subject: iw_cxgb4: always set iw_cm_id.provider_data
Patch-mainline: v4.18-rc1
Git-commit: b06f2efd3bbe522ee0e118c3f29497c857d97f8b
References: bsc#1104276 FATE#325935

In active side connections, the provider_data field is not
getting set.  This will be used in a subsequent patch to dump
state, so always set it.

Signed-off-by: Steve Wise <swise@opengridcomputing.com>
Signed-off-by: Doug Ledford <dledford@redhat.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/cxgb4/cm.c |    1 +
 1 file changed, 1 insertion(+)

--- a/drivers/infiniband/hw/cxgb4/cm.c
+++ b/drivers/infiniband/hw/cxgb4/cm.c
@@ -3213,6 +3213,7 @@ int c4iw_connect(struct iw_cm_id *cm_id,
 
 	ep->com.cm_id = cm_id;
 	ref_cm_id(&ep->com);
+	cm_id->provider_data = ep;
 	ep->com.dev = dev;
 	ep->com.qp = get_qhp(dev, conn_param->qpn);
 	if (!ep->com.qp) {
