From: Geert Uytterhoeven <geert+renesas@glider.be>
Date: Fri, 6 Jul 2018 10:49:35 +0200
Subject: [PATCH] block: Add default switch case to blk_pm_allow_request() to
 kill warning
Git-commit: e9a83853302b339e63dea4072f6210e5a88ab4bb
Patch-mainline: v4.19-rc1
References: bsc#1104967,FATE#325924

With gcc 4.9.0 and 7.3.0:

    block/blk-core.c: In function 'blk_pm_allow_request':
    block/blk-core.c:2747:2: warning: enumeration value 'RPM_ACTIVE' not handled in switch [-Wswitch]
      switch (rq->q->rpm_status) {
      ^

Convert the return statement below the switch() block into a default
case to fix this.

Fixes: e4f36b249b4d4e75 ("block: fix peeking requests during PM")
Signed-off-by: Geert Uytterhoeven <geert+renesas@glider.be>
Reviewed-by: Christoph Hellwig <hch@lst.de>
Signed-off-by: Jens Axboe <axboe@kernel.dk>
Acked-by: Hannes Reinecke <hare@suse.com>
---
 block/blk-core.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/block/blk-core.c b/block/blk-core.c
index 687d7732f23a..c4b57d8806fe 100644
--- a/block/blk-core.c
+++ b/block/blk-core.c
@@ -2753,9 +2753,9 @@ static bool blk_pm_allow_request(struct request *rq)
 		return rq->rq_flags & RQF_PM;
 	case RPM_SUSPENDED:
 		return false;
+	default:
+		return true;
 	}
-
-	return true;
 }
 #else
 static bool blk_pm_allow_request(struct request *rq)
-- 
2.16.4

