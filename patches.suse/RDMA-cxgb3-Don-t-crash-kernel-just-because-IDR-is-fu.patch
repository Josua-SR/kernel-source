From: Leon Romanovsky <leonro@mellanox.com>
Date: Tue, 29 May 2018 14:56:15 +0300
Subject: RDMA/cxgb3: Don't crash kernel just because IDR is full
Patch-mainline: v4.18-rc1
Git-commit: cd13a399e66c1b9b039064e8aa2f959eb90d6947
References: bsc#1103992 FATE#326009

cxgb3 driver properly handles errors returned by IDR, so there is no
need to have special case (kernel crash) just because IDR is full.

Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
Signed-off-by: Doug Ledford <dledford@redhat.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/cxgb3/iwch.h |    1 -
 1 file changed, 1 deletion(-)

--- a/drivers/infiniband/hw/cxgb3/iwch.h
+++ b/drivers/infiniband/hw/cxgb3/iwch.h
@@ -162,7 +162,6 @@ static inline int insert_handle(struct i
 	spin_unlock_irq(&rhp->lock);
 	idr_preload_end();
 
-	BUG_ON(ret == -ENOSPC);
 	return ret < 0 ? ret : 0;
 }
 
