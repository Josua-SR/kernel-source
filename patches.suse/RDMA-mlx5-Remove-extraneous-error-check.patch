From: Gal Pressman <pressmangal@gmail.com>
Date: Mon, 8 Oct 2018 19:44:03 +0300
Subject: RDMA/mlx5: Remove extraneous error check
Patch-mainline: v4.20-rc1
Git-commit: 645ba5970c0766c610920fd5e8dd34e62766af5a
References: bsc#1103991 FATE#326007

Remove double error check from create user RQ error flow.

Fixes: 79b20a6c3014 ("IB/mlx5: Add receive Work Queue verbs")
Signed-off-by: Gal Pressman <pressmangal@gmail.com>
Reviewed-by: Majd Dibbiny <majd@mellanox.com>
Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 drivers/infiniband/hw/mlx5/qp.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/drivers/infiniband/hw/mlx5/qp.c
+++ b/drivers/infiniband/hw/mlx5/qp.c
@@ -5587,8 +5587,7 @@ static int prepare_user_rq(struct ib_pd
 	err = create_user_rq(dev, pd, rwq, &ucmd);
 	if (err) {
 		mlx5_ib_dbg(dev, "err %d\n", err);
-		if (err)
-			return err;
+		return err;
 	}
 
 	rwq->user_index = ucmd.user_index;
