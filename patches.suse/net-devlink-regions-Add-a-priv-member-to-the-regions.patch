From: Andrew Lunn <andrew@lunn.ch>
Date: Fri, 18 Sep 2020 21:11:01 +0200
Subject: net: devlink: regions: Add a priv member to the regions ops struct
Patch-mainline: v5.10-rc1
Git-commit: e14e05e71d106aef973e2cf100e540d911703a6e
References: bsc#1176447

The driver may have multiple regions which can be dumped using one
function. However, for this to work, additional information is
needed. Add a priv member to the ops structure for the driver to use
however it likes.

Reviewed-by: Florian Fainelli <f.fainelli@gmail.com>
Signed-off-by: Andrew Lunn <andrew@lunn.ch>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 include/net/devlink.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/net/devlink.h
+++ b/include/net/devlink.h
@@ -561,12 +561,14 @@ struct devlink_info_req;
  *            the data variable must be updated to point to the snapshot data.
  *            The function will be called while the devlink instance lock is
  *            held.
+ * @priv: Pointer to driver private data for the region operation
  */
 struct devlink_region_ops {
 	const char *name;
 	void (*destructor)(const void *data);
 	int (*snapshot)(struct devlink *devlink, struct netlink_ext_ack *extack,
 			u8 **data);
+	void *priv;
 };
 
 struct devlink_fmsg;
