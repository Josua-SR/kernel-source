From 42b716359beca10684195fd6e93a74ecd8ca8003 Mon Sep 17 00:00:00 2001
From: Srinivas Kandagatla <srinivas.kandagatla@linaro.org>
Date: Tue, 4 Feb 2020 11:12:41 +0000
Subject: [PATCH] ASoC: wcd934x: Add missing COMMON_CLK dependency
Git-commit: 42b716359beca10684195fd6e93a74ecd8ca8003
Patch-mainline: v5.6-rc1
References: jsc#SLE-16518

Looks like some platforms are not yet using COMMON CLK.

PowerPC allyesconfig failed with below error in next

Ld: sound/soc/codecs/wcd934x.o:(.toc+0x0):	 undefined reference to `of_clk_src_simple_get'
Ld: sound/soc/codecs/wcd934x.o: in function `.wcd934x_codec_probe':
wcd934x.c:(.text.wcd934x_codec_probe+0x3d4):
	 undefined reference to `.__clk_get_name'
Ld: wcd934x.c:(.text.wcd934x_codec_probe+0x438):	 undefined reference to `.clk_hw_register'
Ld: wcd934x.c:(.text.wcd934x_codec_probe+0x474):	 undefined reference to `.of_clk_add_provider'

Add the missing COMMON_CLK dependency to fix this errors.

Reported-by: Stephen Rothwell <sfr@canb.auug.org.au>
Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@linaro.org>
Link: https://lore.kernel.org/r/20200204111241.6927-1-srinivas.kandagatla@linaro.org
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/sound/soc/codecs/Kconfig b/sound/soc/codecs/Kconfig
index c9eb683bd1b0..286514865960 100644
--- a/sound/soc/codecs/Kconfig
+++ b/sound/soc/codecs/Kconfig
@@ -1334,6 +1334,7 @@ config SND_SOC_WCD9335
 
 config SND_SOC_WCD934X
 	tristate "WCD9340/WCD9341 Codec"
+	depends on COMMON_CLK
 	depends on MFD_WCD934X
 	help
 	  The WCD9340/9341 is a audio codec IC Integrated in
-- 
2.16.4

