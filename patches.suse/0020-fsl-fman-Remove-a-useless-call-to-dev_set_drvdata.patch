From: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Date: Mon, 6 Nov 2017 22:53:29 +0100
Subject: fsl/fman: Remove a useless call to 'dev_set_drvdata()'

Git-commit: 5adb55c92918225005873aaac5e6af36789bf0ad
Patch-mainline: v4.15-rc1
References: fate#326531

Commit c6e26ea8c893 ("dpaa_eth: change device used") has removed usage of
'dev_set_drvdata()' in the 'mac_probe() function.

This call should also be axed.

Signed-off-by: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Mian Yousaf Kaukab <yousaf.kaukab@suse.com>
---
 drivers/net/ethernet/freescale/fman/mac.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/fman/mac.c b/drivers/net/ethernet/freescale/fman/mac.c
index 1d6da1ea7bfb..c27667a005f7 100644
--- a/drivers/net/ethernet/freescale/fman/mac.c
+++ b/drivers/net/ethernet/freescale/fman/mac.c
@@ -713,7 +713,6 @@ static int mac_probe(struct platform_device *_of_dev)
 		__devm_release_region(dev, fman_get_mem_region(priv->fman),
 				      res.start, res.end + 1 - res.start);
 		devm_kfree(dev, mac_dev);
-		dev_set_drvdata(dev, NULL);
 		return -ENODEV;
 	}
 
-- 
2.11.0

