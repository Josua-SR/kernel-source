From d777587150bc12db82f3d3cd0b6f1a01f82e112a Mon Sep 17 00:00:00 2001
From: Randy Dunlap <rdunlap@infradead.org>
Date: Wed, 1 Jul 2020 14:08:23 -0700
Subject: [PATCH] ALSA: hda: fix SND_HDA_GENERIC kconfig & build
Git-commit: d777587150bc12db82f3d3cd0b6f1a01f82e112a
Patch-mainline: v5.9-rc1
References: jsc#SLE-16518

Fix kconfig warnings and lots of subsequent build errors by
adding yet another ugly select statement:

Warning: unmet direct dependencies detected for LEDS_CLASS  Depends on [n]: NEW_LEDS [=n]  Selected by [y]:  - SND_HDA_GENERIC [=y] && SOUND [=y] && !UML && SND [=y] && SND_HDA [=y] && SND_HDA_GENERIC_LEDS [=y]

Warning: unmet direct dependencies detected for LEDS_TRIGGERS  Depends on [n]: NEW_LEDS [=n] && LEDS_CLASS [=y]  Selected by [y]:  - SND_HDA_GENERIC [=y] && SOUND [=y] && !UML && SND [=y] && SND_HDA [=y] && SND_HDA_GENERIC_LEDS [=y]  Selected by [m]:  - MAC80211_LEDS [=y] && NET [=y] && WIRELESS [=y] && MAC80211 [=m] && LEDS_CLASS [=y]  - IWLWIFI_LEDS [=y] && NETDEVICES [=y] && WLAN [=y] && WLAN_VENDOR_INTEL [=y] && IWLWIFI [=m] && (LEDS_CLASS [=y]=y || LEDS_CLASS [=y]=IWLWIFI [=m]) && (IWLMVM [=m] || IWLDVM [=m])

Warning: unmet direct dependencies detected for LEDS_TRIGGER_AUDIO  Depends on [n]: NEW_LEDS [=n] && LEDS_TRIGGERS [=y]  Selected by [y]:  - SND_HDA_GENERIC [=y] && SOUND [=y] && !UML && SND [=y] && SND_HDA [=y] && SND_HDA_GENERIC_LEDS [=y]

Fixes: 7cdf8c49b1df ("ALSA: hda: generic: Add a helper for mic-mute LED with LED classdev")
Signed-off-by: Randy Dunlap <rdunlap@infradead.org>
Link: https://lore.kernel.org/r/01233744-9625-38b3-0342-1b37250dbc72@infradead.org
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/pci/hda/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/sound/pci/hda/Kconfig b/sound/pci/hda/Kconfig
index 3f9abdaef7f5..102ef58c49e4 100644
--- a/sound/pci/hda/Kconfig
+++ b/sound/pci/hda/Kconfig
@@ -221,6 +221,7 @@ comment "Set to Y if you want auto-loading the codec driver"
 
 config SND_HDA_GENERIC
 	tristate "Enable generic HD-audio codec parser"
+	select NEW_LEDS if SND_HDA_GENERIC_LEDS
 	select LEDS_CLASS if SND_HDA_GENERIC_LEDS
 	select LEDS_TRIGGERS if SND_HDA_GENERIC_LEDS
 	select LEDS_TRIGGER_AUDIO if SND_HDA_GENERIC_LEDS
-- 
2.16.4

