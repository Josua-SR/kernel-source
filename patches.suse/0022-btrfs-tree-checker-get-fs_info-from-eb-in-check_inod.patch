From 39e57f495bf94c4d36a8048aea37b1cd2ab730bc Mon Sep 17 00:00:00 2001
From: David Sterba <dsterba@suse.com>
Date: Wed, 20 Mar 2019 16:22:58 +0100
Git-commit: 39e57f495bf94c4d36a8048aea37b1cd2ab730bc
References: dependency for bsc#1157692
Patch-mainline: v5.2
Subject: [PATCH 22/22] btrfs: tree-checker: get fs_info from eb in
 check_inode_item

We can read fs_info from extent buffer and can drop it from the
parameters.

Signed-off-by: David Sterba <dsterba@suse.com>
---
 fs/btrfs/tree-checker.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/fs/btrfs/tree-checker.c b/fs/btrfs/tree-checker.c
index 752ac3bc2587..6828de4e976c 100644
--- a/fs/btrfs/tree-checker.c
+++ b/fs/btrfs/tree-checker.c
@@ -680,10 +680,10 @@ static int check_dev_item(struct extent_buffer *leaf,
 #define inode_item_err(fs_info, eb, slot, fmt, ...)			\
 	dir_item_err(eb, slot, fmt, __VA_ARGS__)
 
-static int check_inode_item(struct btrfs_fs_info *fs_info,
-			    struct extent_buffer *leaf,
+static int check_inode_item(struct extent_buffer *leaf,
 			    struct btrfs_key *key, int slot)
 {
+	struct btrfs_fs_info *fs_info = leaf->fs_info;
 	struct btrfs_inode_item *iitem;
 	u64 super_gen = btrfs_super_generation(fs_info->super_copy);
 	u32 valid_mask = (S_IFMT | S_ISUID | S_ISGID | S_ISVTX | 0777);
@@ -800,7 +800,7 @@ static int check_leaf_item(struct extent_buffer *leaf,
 		ret = check_dev_item(leaf, key, slot);
 		break;
 	case BTRFS_INODE_ITEM_KEY:
-		ret = check_inode_item(leaf->fs_info, leaf, key, slot);
+		ret = check_inode_item(leaf, key, slot);
 		break;
 	}
 	return ret;
-- 
2.24.1

