From: Dave Airlie <airlied@redhat.com>
Date: Tue, 3 Oct 2017 12:36:54 +1000
Subject: amdgpu/dc: inline dal grph object id functions.
Git-commit: 48aa3ddfd535a8e80b1b46da8a13920d9de8e5c5
Patch-mainline: v4.15-rc1
References: FATE#326289 FATE#326079 FATE#326049 FATE#322398 FATE#326166

This is worth 400 bytes.

Signed-off-by: Dave Airlie <airlied@redhat.com>
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/gpu/drm/amd/display/dc/basics/grph_object_id.c |   61 --------------
 drivers/gpu/drm/amd/display/include/grph_object_id.h   |   70 +++++++++++++----
 2 files changed, 55 insertions(+), 76 deletions(-)

--- a/drivers/gpu/drm/amd/display/dc/basics/grph_object_id.c
+++ b/drivers/gpu/drm/amd/display/dc/basics/grph_object_id.c
@@ -26,7 +26,7 @@
 #include "dm_services.h"
 #include "include/grph_object_id.h"
 
-bool dal_graphics_object_id_is_valid(struct graphics_object_id id)
+static bool dal_graphics_object_id_is_valid(struct graphics_object_id id)
 {
 	bool rc = true;
 
@@ -72,63 +72,4 @@ bool dal_graphics_object_id_is_equal(
 	return false;
 }
 
-/* Based on internal data members memory layout */
-uint32_t dal_graphics_object_id_to_uint(struct graphics_object_id id)
-{
-	uint32_t object_id = 0;
-
-	object_id = id.id + (id.enum_id << 0x8) + (id.type << 0xc);
-	return object_id;
-}
-
-/*
- * ******* get specific ID - internal safe cast into specific type *******
- */
-
-enum controller_id dal_graphics_object_id_get_controller_id(
-	struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_CONTROLLER)
-		return id.id;
-	return CONTROLLER_ID_UNDEFINED;
-}
-
-enum clock_source_id dal_graphics_object_id_get_clock_source_id(
-	struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_CLOCK_SOURCE)
-		return id.id;
-	return CLOCK_SOURCE_ID_UNDEFINED;
-}
-
-enum encoder_id dal_graphics_object_id_get_encoder_id(
-	struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_ENCODER)
-		return id.id;
-	return ENCODER_ID_UNKNOWN;
-}
-
-enum connector_id dal_graphics_object_id_get_connector_id(
-	struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_CONNECTOR)
-		return id.id;
-	return CONNECTOR_ID_UNKNOWN;
-}
-
-enum audio_id dal_graphics_object_id_get_audio_id(struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_AUDIO)
-		return id.id;
-	return AUDIO_ID_UNKNOWN;
-}
-
-enum engine_id dal_graphics_object_id_get_engine_id(
-	struct graphics_object_id id)
-{
-	if (id.type == OBJECT_TYPE_ENGINE)
-		return id.id;
-	return ENGINE_ID_UNKNOWN;
-}
 
--- a/drivers/gpu/drm/amd/display/include/grph_object_id.h
+++ b/drivers/gpu/drm/amd/display/include/grph_object_id.h
@@ -233,24 +233,62 @@ static inline struct graphics_object_id
 	return result;
 }
 
-bool dal_graphics_object_id_is_valid(
-	struct graphics_object_id id);
 bool dal_graphics_object_id_is_equal(
 	struct graphics_object_id id1,
 	struct graphics_object_id id2);
-uint32_t dal_graphics_object_id_to_uint(
-	struct graphics_object_id id);
 
-enum controller_id dal_graphics_object_id_get_controller_id(
-	struct graphics_object_id id);
-enum clock_source_id dal_graphics_object_id_get_clock_source_id(
-	struct graphics_object_id id);
-enum encoder_id dal_graphics_object_id_get_encoder_id(
-	struct graphics_object_id id);
-enum connector_id dal_graphics_object_id_get_connector_id(
-	struct graphics_object_id id);
-enum audio_id dal_graphics_object_id_get_audio_id(
-	struct graphics_object_id id);
-enum engine_id dal_graphics_object_id_get_engine_id(
-	struct graphics_object_id id);
+/* Based on internal data members memory layout */
+static inline uint32_t dal_graphics_object_id_to_uint(
+	struct graphics_object_id id)
+{
+	return id.id + (id.enum_id << 0x8) + (id.type << 0xc);
+}
+
+static inline enum controller_id dal_graphics_object_id_get_controller_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_CONTROLLER)
+		return id.id;
+	return CONTROLLER_ID_UNDEFINED;
+}
+
+static inline enum clock_source_id dal_graphics_object_id_get_clock_source_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_CLOCK_SOURCE)
+		return id.id;
+	return CLOCK_SOURCE_ID_UNDEFINED;
+}
+
+static inline enum encoder_id dal_graphics_object_id_get_encoder_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_ENCODER)
+		return id.id;
+	return ENCODER_ID_UNKNOWN;
+}
+
+static inline enum connector_id dal_graphics_object_id_get_connector_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_CONNECTOR)
+		return id.id;
+	return CONNECTOR_ID_UNKNOWN;
+}
+
+static inline enum audio_id dal_graphics_object_id_get_audio_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_AUDIO)
+		return id.id;
+	return AUDIO_ID_UNKNOWN;
+}
+
+static inline enum engine_id dal_graphics_object_id_get_engine_id(
+	struct graphics_object_id id)
+{
+	if (id.type == OBJECT_TYPE_ENGINE)
+		return id.id;
+	return ENGINE_ID_UNKNOWN;
+}
 #endif
