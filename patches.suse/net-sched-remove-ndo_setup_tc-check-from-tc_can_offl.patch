From: Jiri Pirko <jiri@mellanox.com>
Date: Wed, 1 Nov 2017 11:47:41 +0100
Subject: net: sched: remove ndo_setup_tc check from tc_can_offload
Patch-mainline: v4.15-rc1
Git-commit: 70b5aee46782208c14d93b715e9f62f7fec844f1
References: bsc#1109837

Since tc_can_offload is always called from block callback or egdev
callback, no need to check if ndo_setup_tc exists.

Signed-off-by: Jiri Pirko <jiri@mellanox.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Thomas Bogendoerfer <tbogendoerfer@suse.de>
---
 include/net/pkt_cls.h |    6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

--- a/include/net/pkt_cls.h
+++ b/include/net/pkt_cls.h
@@ -612,11 +612,7 @@ struct tc_cls_u32_offload {
 
 static inline bool tc_can_offload(const struct net_device *dev)
 {
-	if (!(dev->features & NETIF_F_HW_TC))
-		return false;
-	if (!dev->netdev_ops->ndo_setup_tc)
-		return false;
-	return true;
+	return dev->features & NETIF_F_HW_TC;
 }
 
 static inline bool tc_skip_hw(u32 flags)
