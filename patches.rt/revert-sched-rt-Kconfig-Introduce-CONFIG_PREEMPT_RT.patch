From 9ad25db36646e71a0d5e17dabca671b6423a9715 Mon Sep 17 00:00:00 2001
From: Daniel Wagner <wagi@monom.org>
Date: Fri, 27 Sep 2019 10:25:43 +0200
Subject: [PATCH] Revert "sched/rt, Kconfig: Introduce CONFIG_PREEMPT_RT"
Git-repo: git://git.kernel.org/pub/scm/linux/kernel/git/wagi/linux-stable-rt.git
Git-commit: 6ac54344f44abc686204a87ad5e1291c55fb4a11
Patch-mainline: Queued in subsystem maintainer repository
References: SLE Realtime Extension

This reverts commit a50a3f4b6a313dc76912bd4ad3b8b4f4b479c801.
Signed-off-by: Daniel Wagner <dwagner@suse.de>
---
 arch/Kconfig           |    3 ---
 kernel/Kconfig.preempt |   23 +----------------------
 2 files changed, 1 insertion(+), 25 deletions(-)

--- a/arch/Kconfig
+++ b/arch/Kconfig
@@ -799,9 +799,6 @@ config ARCH_NO_COHERENT_DMA_MMAP
 config ARCH_NO_PREEMPT
 	bool
 
-config ARCH_SUPPORTS_RT
-	bool
-
 config CPU_NO_EFFICIENT_FFS
 	def_bool n
 
--- a/kernel/Kconfig.preempt
+++ b/kernel/Kconfig.preempt
@@ -38,7 +38,7 @@ config PREEMPT_VOLUNTARY
 config PREEMPT
 	bool "Preemptible Kernel (Low-Latency Desktop)"
 	depends on !ARCH_NO_PREEMPT
-	select PREEMPTION
+	select PREEMPT_COUNT
 	select UNINLINE_SPIN_UNLOCK if !ARCH_INLINE_SPIN_UNLOCK
 	help
 	  This option reduces the latency of the kernel by making
@@ -55,28 +55,7 @@ config PREEMPT
 	  embedded system with latency requirements in the milliseconds
 	  range.
 
-config PREEMPT_RT
-	bool "Fully Preemptible Kernel (Real-Time)"
-	depends on EXPERT && ARCH_SUPPORTS_RT
-	select PREEMPTION
-	help
-	  This option turns the kernel into a real-time kernel by replacing
-	  various locking primitives (spinlocks, rwlocks, etc.) with
-	  preemptible priority-inheritance aware variants, enforcing
-	  interrupt threading and introducing mechanisms to break up long
-	  non-preemptible sections. This makes the kernel, except for very
-	  low level and critical code pathes (entry code, scheduler, low
-	  level interrupt handling) fully preemptible and brings most
-	  execution contexts under scheduler control.
-
-	  Select this if you are building a kernel for systems which
-	  require real-time guarantees.
-
 endchoice
 
 config PREEMPT_COUNT
        bool
-
-config PREEMPTION
-       bool
-       select PREEMPT_COUNT
