From 1affec67207e8f06cfa84c61817da27b8633e621 Mon Sep 17 00:00:00 2001
From: Nicolas Morey-Chaisemartin <nmoreychaisemartin@suse.com>
Date: Wed, 6 Nov 2019 11:17:24 +0100
Subject: kabi protect RDMA_DRIVER_EFA
Patch-mainline: never, kabi
References: jsc#SLE-4805

EFA driver requires RDMA_DRIVER_EFA to be a valid rdma_driver_id enum.
This does not break the existing ABI.
Add kABI markers to avoid ABI checker complaints

Signed-off-by: Nicolas Morey-Chaisemartin <nmoreychaisemartin@suse.com>
---
 include/uapi/rdma/rdma_user_ioctl_cmds.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/include/uapi/rdma/rdma_user_ioctl_cmds.h b/include/uapi/rdma/rdma_user_ioctl_cmds.h
index 26213f49f5c8..f55c00c52cd9 100644
--- a/include/uapi/rdma/rdma_user_ioctl_cmds.h
+++ b/include/uapi/rdma/rdma_user_ioctl_cmds.h
@@ -102,7 +102,9 @@ enum rdma_driver_id {
 	RDMA_DRIVER_RXE,
 	RDMA_DRIVER_HFI1,
 	RDMA_DRIVER_QIB,
+#ifndef __GENKSYMS__
 	RDMA_DRIVER_EFA,
+#endif
 };
 
 #endif
-- 
2.21.0

