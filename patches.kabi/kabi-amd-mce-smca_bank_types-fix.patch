From: Borislav Petkov <bp@suse.de>
Date: Fri, 10 Jan 2020 01:56:47 +0000
Subject: x86/MCE/AMD: Add a KABI workaround for enum smca_bank_types
Patch-mainline: never, SUSE-specific
References: jsc#SLE-11833

Workaround the extension of the smca_bank_types enum. Nothing external should
ever use this.

Signed-off-by: Borislav Petkov <bp@suse.de>
---
 arch/x86/include/asm/mce.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/arch/x86/include/asm/mce.h
+++ b/arch/x86/include/asm/mce.h
@@ -290,7 +290,9 @@ extern void apei_mce_report_mem_error(in
 /* These may be used by multiple smca_hwid_mcatypes */
 enum smca_bank_types {
 	SMCA_LS = 0,	/* Load Store */
+#ifndef __GENKSYMS__
 	SMCA_LS_V2,	/* Load Store */
+#endif
 	SMCA_IF,	/* Instruction Fetch */
 	SMCA_L2_CACHE,	/* L2 Cache */
 	SMCA_DE,	/* Decoder Unit */
