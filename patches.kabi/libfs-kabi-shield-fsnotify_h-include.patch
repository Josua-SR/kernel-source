From: Nicolai Stange <nstange@suse.de>
Patch-mainline: Never, kABI
Subject: kABI: shield fsnotify.h #include in libfs.c from kABI checker
References: bsc#1159198

The backport of upstream commit a3d1e7eb5abe ("simple_recursive_removal(): 
kernel-side rm -rf for ramfs-style filesystems") with suse-commit
ae16628dcb64 made the kABI checker complain due to the new fsnotify.h
inclusion from fs/libfs.c:

  ../fs/libfs.c:36: warning: simple_getattr: modversion changed because of
     changes in struct fsnotify_mark_connector (became defined), struct
     sighand_struct (became defined), struct signal_struct (became
     defined), struct pid_namespace (became defined)

Protect this #include with a __GENKSYMS__ #ifdef.

---
 fs/libfs.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/fs/libfs.c
+++ b/fs/libfs.c
@@ -19,7 +19,9 @@
 #include <linux/buffer_head.h> /* sync_mapping_buffers */
 #include <linux/fs_context.h>
 #include <linux/pseudo_fs.h>
+#ifndef __GENKSYMS__
 #include <linux/fsnotify.h>
+#endif
 
 #include <linux/uaccess.h>
 
